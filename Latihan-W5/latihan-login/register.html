<!DOCTYPE html>
<html lang="en">
<head>
    <title>Form Registrasi</title>
    <style>
        /* Dark theme: Black cards, yellow headers, white text */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-image: url('../Banner.png'); background-size: cover; background-position: center; background-repeat: no-repeat; background-attachment: fixed; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; color: #fff; }
        .login-container { background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5); width: 100%; max-width: 400px; border: 2px solid rgba(255, 215, 0, 0.3); animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        h2 { text-align: center; color: #FFD700; margin-bottom: 30px; font-size: 32px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); font-weight: 700; letter-spacing: 1px; }
        p { margin: 20px 0 8px 0; }
        label, p { color: #FFD700; font-weight: 500; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8); }
        input[type="text"], input[type="email"], input[type="password"], input[type="tel"] { width: 100%; padding: 12px 15px; border: 2px solid rgba(255, 215, 0, 0.3); border-radius: 10px; background: rgba(255, 255, 255, 0.1); color: #fff; font-size: 15px; transition: all 0.3s ease; margin-top: 5px; }
        input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus, input[type="tel"]:focus { outline: none; border-color: #FFD700; background: rgba(255, 255, 255, 0.2); box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); transform: translateY(-2px); }
        input::placeholder { color: rgba(255,255,255,0.7); }
        button { width: 100%; padding: 14px; background: linear-gradient(135deg, #ff6b9d 0%, #e2cd11 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 18px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-top: 10px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 157, 0.4); }
        button:hover { background: linear-gradient(135deg, #ff5a8d 0%, #b85dc7 100%); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 107, 157, 0.6); }
        button:active { transform: translateY(0); }
        .error { color: #ff4444; background: rgba(0,0,0,0.8); padding: 5px 10px; border-radius: 5px; font-size: 12px; display: none; margin-top: 5px; font-weight: 600; }
        #errorPopup, #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: none; z-index: 999; backdrop-filter: blur(5px); }
        #errorPopup { top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%); color: white; padding: 20px; border-radius: 15px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5); z-index: 1000; width: 80%; max-width: 350px; min-width: 250px; text-align: center; animation: popupSlide 0.3s ease; border: 2px solid rgba(255,215,0,0.3); }
        @keyframes popupSlide { from { opacity: 0; transform: translate(-50%, -60%); } to { opacity: 1; transform: translate(-50%, -50%); } }
        #errorPopup p { margin-bottom: 20px; font-size: 16px; color: #fff; }
        #errorPopup button { width: auto; padding: 10px 30px; background: rgba(255,215,0,0.2); color: #fff; font-weight: 700; border: 1px solid #FFD700; border-radius: 5px; cursor: pointer; transition: all 0.3s; }
        #errorPopup button:hover { background: rgba(255,215,0,0.4); transform: translateY(-1px); }
        .link { text-align: center; margin-top: 20px; }
        .link a { color: #FFD700; text-decoration: none; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .link a:hover { text-decoration: underline; }
        @media (max-width: 480px) { .login-container { padding: 30px 20px; } h2 { font-size: 26px; } #errorPopup { width: 90%; padding: 15px; } }
    </style>
</head>
<body>
    <div id="overlay"></div>
    <div id="errorPopup">
        <p id="errorMessage"></p>
        <button onclick="closePopup()">OK</button>
    </div>
 
    <div class="login-container">
        <h2>Form Registrasi</h2>
        <form id="registerForm" action="proses_register.php" method="POST">
            <p>Username:</p>
            <input type="text" name="username" id="username" required minlength="3" pattern="[a-zA-Z0-9]+" title="Username minimal 3 karakter, huruf dan angka saja">
            <span class="error" id="usernameError"></span>
           
            <p>Email:</p>
            <input type="email" name="email" id="email" required>
            <span class="error" id="emailError"></span>
           
            <p>Password:</p>
            <input type="password" name="password" id="password" required minlength="5" title="Password minimal 5 karakter">
            <span class="error" id="passwordError"></span>
           
            <p>NIM:</p>
            <input type="text" name="nim" id="nim" required pattern="[0-9]+" title="NIM hanya angka">
            <span class="error" id="nimError"></span>
           
            <p>Nama:</p>
            <input type="text" name="nama" id="nama" required>
           
            <p>Jurusan:</p>
            <input type="text" name="jurusan" id="jurusan" required>
           
            <p>Prodi:</p>
            <input type="text" name="prodi" id="prodi" required>
 
            <p>Alamat:</p>
            <input type="text" name="address" id="address" required maxlength="255">
            <span class="error" id="addressError"></span>
 
            <p>No. Telepon:</p>
            <input type="tel" name="phone" id="phone" required pattern="[0-9+]+" title="Nomor telepon hanya angka dan +">
            <span class="error" id="phoneError"></span>
           
            <p><button type="submit">Daftar</button></p>
        </form>
        <div class="link">
            <a href="login.html">Sudah punya akun? Login di sini</a>
        </div>
    </div>
 
    <script>
        // Client-side validation (similar to login)
        function validateField(field, condition, errorMsg, errorId) {
            if (!condition) {
                document.getElementById(errorId).textContent = errorMsg;
                document.getElementById(errorId).style.display = 'block';
                return false;
            } else {
                document.getElementById(errorId).style.display = 'none';
                return true;
            }
        }
 
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const nim = document.getElementById('nim').value;
 
            if (!validateField('username', username.length >= 3 && /^[a-zA-Z0-9]+$/.test(username), 'Username minimal 3 karakter, huruf dan angka saja!', 'usernameError')) e.preventDefault();
            if (!validateField('email', /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email), 'Format email tidak valid!', 'emailError')) e.preventDefault();
            if (!validateField('password', password.length >= 5, 'Password minimal 5 karakter!', 'passwordError')) e.preventDefault();
            if (!validateField('nim', /^[0-9]+$/.test(nim), 'NIM hanya angka!', 'nimError')) e.preventDefault();
            if (!validateField('address', document.getElementById('address').value.trim().length > 0, 'Alamat tidak boleh kosong!', 'addressError')) e.preventDefault();
            if (!validateField('phone', /^[0-9+]+$/.test(document.getElementById('phone').value), 'No. Telepon hanya angka dan +!', 'phoneError')) e.preventDefault();
 
            // Show popup on errors (reuse showPopup from login)
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            if (error) { showPopup(decodeURIComponent(error)); window.history.replaceState({}, document.title, window.location.pathname); }
        });
       
 
        function showPopup(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorPopup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
        function closePopup() {
            document.getElementById('errorPopup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>
</html>